window.__require=function t(e,o,n){function i(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var l=o[c]={exports:{}};e[c][0].call(l.exports,function(t){return i(e[c][1][t]||t)},l,l.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({CaoThapView:[function(t,e,o){"use strict";cc._RF.push(e,"869426n5M5Mmp9jCl8CHj7+","CaoThapView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c},c=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function c(t){try{s(n.next(t))}catch(e){r(e)}}function a(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(a){r=[6,a],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../Scritps/Network/ConectManager"),u=t("../../../Scritps/Other/DragMiniGame"),l=t("../../../Scritps/Windown"),p=t("./MiniGameResult"),h=t("./TrenDuoiUI"),d=t("./TrenDuoiReel"),f=t("../../../Scritps/Other/OffMiniGame"),g=t("../../../Scritps/DefineTs/TextDefine"),y=t("../../../Scritps/Obs/JackpotItem"),m=t("../../../Scritps/Game/GAME_TYPE"),v=cc._decorator,b=v.ccclass,S=v.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sfs=null,e.roomSFS=null,e.listConfigBet=[],e.curRoomBet=0,e.MiniGameResult=null,e.TrenDuoiUI=null,e.TrenDuoiReel=null,e.idLabel=null,e.balanceLabel=null,e.highBalanceLabel=null,e.lowBalanceLabel=null,e.toastPrefab=null,e.timeLabel=null,e.itemChooseBet=null,e.parentBtnLevelBet=null,e.historyCardNode=null,e.historyCardItemPrefab=null,e.lbJp=null,e.listTextureBet=[],e}return i(e,t),e.prototype.onLoad=function(){cc.log("chay vao on load cao thap view !!!!"),l.Windown.CaoThapView=this,this.playing=!1,this.spining=!1,this.TrenDuoiReel.init(this),this.reset()},e.prototype.start=function(){this.getComponent(u.default).nomalSize(),this.sfs=s.ConectManager.getIns().sfs,this.sfs.addEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_CREATION_ERROR,this.onCreateError,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom,this),this.sfs.addEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr,this),this.sfs.addEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse,this),this.sendJoinRoom(),this.lbJp.lbMoney.time=.5,this.lbJp.index=100,this.getComponent(u.default).nomalSize()},e.prototype.onCreateError=function(){cc.log("creat errr"),l.Windown.UIManager.hideLoading(),cc.director.loadScene("main"),l.Windown.Dialog.showLog(g.TextDefine.ERR_JOIN_ROOM)},e.prototype.onJoinRoomErr=function(){cc.log("onJoinRoomErr "),l.Windown.UIManager.hideLoading(),l.Windown.UIManager.hideLoadingData(),l.Windown.Dialog.showLog(g.TextDefine.ERR_JOIN_ROOM),cc.director.loadScene("main")},e.prototype.sendJoinRoom=function(){l.Windown.UIManager.showLoading(),cc.log("send creat room");try{var t=s.ConectManager.getIns().getValibleRoomName(),e=new SFS2X.RoomSettings(t),o=new SFS2X.RoomExtension("CaoThapExtension","ext.Room.CaoThap.CaoThapExtension");e.extension=o,e.isGame=!0,e.maxUsers=1,e.groupId="CaoThap",this.sfs.send(new SFS2X.CreateRoomRequest(e,!0)),cc.log("send creat room : ",JSON.stringify(e))}catch(n){cc.error(n),this.onDisconnect()}},e.prototype.onJoinRoom=function(t){return c(this,void 0,void 0,function(){var e,o,n,i,r,c,s;return a(this,function(){if(e=t.room,cc.log("onJoinRoom : ",t.room),l.Windown.UIManager.hideLoading(),"CaoThap"==e.groupId){for(c in this.roomSFS=e,o=e.getVariable("cf"),n=o.value,cc.log(n),i=[],r=JSON.parse(n))(s=Object.create(null)).bet=parseInt(c),s.perJp=r[c].percentPot/100,i.push(s);i.sort(function(t,e){return t.bet-e.bet}),this.listConfigBet=i,console.log("check list config bet : ",this.listConfigBet),this.curRoomBet=this.listConfigBet[0].bet,this.balanceLabel.string=l.Windown.formatNumber(this.listConfigBet[0].bet).toString(),this.genButtonBetByConfig(),this.lbJp.changeIndex(this.curRoomBet)}return[2]})})},e.prototype.genButtonBetByConfig=function(){for(var t=this.itemChooseBet.node,e=this.parentBtnLevelBet.children,o=0;o<this.listConfigBet.length;o++){var n=this.listConfigBet[o],i=e[o];null==i&&(i=cc.instantiate(t),this.parentBtnLevelBet.addChild(i)),i.active=!0,o<this.listTextureBet.length&&(i.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=this.listTextureBet[o]),i.getChildByName("lbBet").getComponent(cc.Label).string=l.Windown.formatMoney1k(n.bet),i.getComponent(cc.Toggle).checkEvents[0].customEventData=n.bet.toString(),i.getComponent(cc.Toggle).isChecked=0===o}},e.prototype.onClickChooseBet=function(t,e){var o=parseInt(e);this.curRoomBet=o,this.balanceLabel.string=l.Windown.formatNumber(o),this.lbJp.changeIndex(this.curRoomBet)},e.prototype.extResponse=function(t){var e=t.cmd,o=t.params;switch(e){case"StartGame":cc.log("check data spin : ",l.Windown.SFSObjToJson(o)),this.handleResult(this.convertData(o));break;case"Play":cc.log("check data play : ",l.Windown.SFSObjToJson(o)),this.handleResult(this.convertData(o));break;case"endGame":cc.log("check data endGame : ",l.Windown.SFSObjToJson(o));var n=this.convertData(o).card;this.convertData(o).JackPot>0||0===n?this.handleFinish(this.convertData(o)):this.handleResult(this.convertData(o))}},e.prototype.convertData=function(t){var e={status:!0,amount:0,card:0,prize_up:0,prize_down:0,numberAce:0,remain_time:0,ag:0,total_prize_amount:0,JackPot:0};return null!==t.get("idCard")&&(e.card=t.get("idCard")),null!==t.get("CurrentWinTop")&&(e.prize_up=t.get("CurrentWinTop")),null!==t.get("CurrentWinBot")&&(e.prize_down=t.get("CurrentWinBot")),null!==t.get("CurrentBet")&&(e.total_prize_amount=t.get("CurrentBet")),null!==t.get("numberAce")&&(e.numberAce=t.get("numberAce")),null!==t.get("time")&&(e.remain_time=t.get("time")),null!==t.get("ag")&&(e.ag=t.get("ag")),null!==t.get("agWin")&&(e.amount=t.get("agWin")),null!==t.get("isWin")&&(e.status=t.get("isWin")),null!==t.get("JackPot")&&(e.JackPot=t.get("JackPot")),e},e.prototype.handleResult=function(t){this.isPlaying()||this.TrenDuoiUI.removeAce(),this.initSpinId(t),this.TrenDuoiUI.spinCard(t.card,t,!1)},e.prototype.handleFinish=function(t){t.JackPot>0||t.card>0?this.TrenDuoiUI.spinCard(t.card,t,!0):(this.reset(),this.MiniGameResult.show(t.amount,"K\u1ebft th\xfac"))},e.prototype.initSpinId=function(){this.idLabel.string=""},e.prototype.onDisconnect=function(){cc.log("disconnect"),l.Windown.UIManager.hideLoading(),l.Windown.UIManager.hideLoadingData(),cc.director.loadScene("main")},e.prototype.onClickPlay=function(t,e){if(cc.log("check status : ",this.isPlaying(),"check them : ",this.isSendSpin()),this.isPlaying()){if(void 0!==this.isSendSpin()&&!1===this.isSendSpin()){this.setSendSpin(!0);var o=parseInt(e),n=s.ConectManager.getIns().getSFSObj();n.putInt("typeBet",o),cc.log("onClick type bet : ",o),s.ConectManager.getIns().sendRequest("Play",n,this.roomSFS),this.TrenDuoiUI.showHighDisable(),this.TrenDuoiUI.showLowDisable()}}else this.showMessage("B\u1ea5m v\xe0o PLAY \u0111\u1ec3 b\u1eaft \u0111\u1ea7u ch\u01a1i")},e.prototype.sendSpin=function(){var t=s.ConectManager.getIns().getSFSObj();t.putInt("bet",this.curRoomBet),cc.log("onClickSendSpin Mini : ",this.curRoomBet),s.ConectManager.getIns().sendRequest("StartGame",t,this.roomSFS)},e.prototype.onClickSpin=function(){this.isSendSpin()||this.isPlaying()||(this.setSendSpin(!0),this.sendSpin(),this.MiniGameResult.reset())},e.prototype.userExitRoom=function(t){"CaoThap"==t.room.groupId&&(cc.log("user exit room cao thap"),t.user.isItMe)&&this.node.destroy()},e.prototype.onClickNewGame=function(){if(this.isSpining())this.showMessage("Vui l\xf2ng ch\u1edd v\xf2ng quay k\u1ebft th\xfac");else if(this.isPlaying()){if(!this.isSendSpin()){this.setSendSpin(!0);var t=s.ConectManager.getIns().getSFSObj();s.ConectManager.getIns().sendRequest("endGame",t,this.roomSFS)}}else this.showMessage("B\u1ea5m v\xe0o PLAY \u0111\u1ec3 b\u1eaft \u0111\u1ea7u ch\u01a1i")},e.prototype.initBalance=function(t){this.balanceLabel.string=l.Windown.formatNumber(t.total_prize_amount),0!==t.prize_up?(this.highBalanceLabel.string=l.Windown.formatNumber(t.prize_up),this.TrenDuoiUI.showHighButton()):(this.highBalanceLabel.string=l.Windown.formatNumber(0),this.TrenDuoiUI.showHighDisable()),0!==t.prize_down?(this.lowBalanceLabel.string=l.Windown.formatNumber(t.prize_down),this.TrenDuoiUI.showLowButton()):(this.lowBalanceLabel.string=l.Windown.formatNumber(0),this.TrenDuoiUI.showLowDisable())},e.prototype.initTime=function(t){this.time=t.remain_time,this.time||(this.time=0),this.setTimeLabel(this.time),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval)),this.setTimeLabel(this.time)}.bind(this),1e3)},e.prototype.setTimeLabel=function(t){var e=l.Windown.formatTimeBySec(t,!1);this.timeLabel.string=e},e.prototype.addHistoryCardNode=function(t){var e=cc.instantiate(this.historyCardItemPrefab);e.getComponent("TrenDuoiHistoryCardItem").init(t),e.parent=this.historyCardNode},e.prototype.showMessage=function(t){var e=cc.instantiate(this.toastPrefab);e.scale=.8,e.setPosition(0,-50),e.parent=this.node,e.getComponent("Toast").showToast(t)},e.prototype.setPlaying=function(t){this.playing=t},e.prototype.checkAt=function(t){return t/100==14},e.prototype.isSpining=function(){return this.spining},e.prototype.isPlaying=function(){return this.playing},e.prototype.isSendSpin=function(){return this.is_send_spin},e.prototype.setSpining=function(t){this.spining=t},e.prototype.setSendSpin=function(t){this.is_send_spin=t},e.prototype.onClickClose=function(){l.Windown.UIManager.parentMiniGame.getComponentInChildren(f.default)._touchStart(null),this.node.active=!1,this.reset(),this.roomSFS?s.ConectManager.getIns().sendLeaveRoom(this.roomSFS):this.node.destroy()},e.prototype.onDestroy=function(){this.clear(),l.Windown.CaoThapView=null},e.prototype.clear=function(){cc.systemEvent.targetOff(this),this.sfs.removeEventListener(SFS2X.SFSEvent.USER_EXIT_ROOM,this.userExitRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN,this.onJoinRoom),this.sfs.removeEventListener(SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onJoinRoomErr),this.sfs.removeEventListener(SFS2X.SFSEvent.EXTENSION_RESPONSE,this.extResponse)},e.prototype.ClickButtonHelp=function(){l.Windown.UIManager.showLoading(),l.Windown.GuideTrenDuoi?l.Windown.GuideTrenDuoi.show():cc.assetManager.loadBundle(m.default.CaoThap.toString(),function(t,e){t||e.load("Prefab/Guide",cc.Prefab,function(t,e){if(!t){var o=cc.instantiate(e);l.Windown.UIManager.parentPopup.addChild(o),l.Windown.GuideTrenDuoi.show()}})})},e.prototype.ClickButtonLSGG=function(){l.Windown.UIManager.showLoading(),l.Windown.LSGGTrenDuoi?l.Windown.LSGGTrenDuoi.show():cc.assetManager.loadBundle(m.default.CaoThap.toString(),function(t,e){t||e.load("Prefab/LSGD",cc.Prefab,function(t,e){if(!t){var o=cc.instantiate(e);l.Windown.UIManager.parentPopup.addChild(o),l.Windown.LSGGTrenDuoi.show()}})})},e.prototype.ClickButtonRank=function(){l.Windown.UIManager.showLoading(),l.Windown.RankViewTrenDuoi?l.Windown.RankViewTrenDuoi.show():cc.assetManager.loadBundle(m.default.CaoThap.toString(),function(t,e){t||e.load("Prefab/RankView",cc.Prefab,function(t,e){if(!t){var o=cc.instantiate(e);l.Windown.UIManager.parentPopup.addChild(o),l.Windown.RankViewTrenDuoi.show()}})})},e.prototype.reset=function(){this.highBalanceLabel.string="",this.lowBalanceLabel.string="",cc.log("chay vao reset game"),this.playing=!1,this.spining=!1,this.balanceLabel.string=this.curRoomBet.toString(),clearInterval(this.timeInterval),this.setTimeLabel(0),this.historyCardNode.removeAllChildren(),this.MiniGameResult.reset(),this.TrenDuoiUI.reset(),this.TrenDuoiUI.removeAce(),this.setSendSpin(!1)},r([S(p.default)],e.prototype,"MiniGameResult",void 0),r([S(h.default)],e.prototype,"TrenDuoiUI",void 0),r([S(d.default)],e.prototype,"TrenDuoiReel",void 0),r([S(cc.Label)],e.prototype,"idLabel",void 0),r([S(cc.Label)],e.prototype,"balanceLabel",void 0),r([S(cc.Label)],e.prototype,"highBalanceLabel",void 0),r([S(cc.Label)],e.prototype,"lowBalanceLabel",void 0),r([S(cc.Prefab)],e.prototype,"toastPrefab",void 0),r([S(cc.Label)],e.prototype,"timeLabel",void 0),r([S(cc.Toggle)],e.prototype,"itemChooseBet",void 0),r([S(cc.Node)],e.prototype,"parentBtnLevelBet",void 0),r([S(cc.Node)],e.prototype,"historyCardNode",void 0),r([S(cc.Prefab)],e.prototype,"historyCardItemPrefab",void 0),r([S(y.default)],e.prototype,"lbJp",void 0),r([S([cc.SpriteFrame])],e.prototype,"listTextureBet",void 0),r([b],e)}(cc.Component);o.default=w,cc._RF.pop()},{"../../../Scritps/DefineTs/TextDefine":void 0,"../../../Scritps/Game/GAME_TYPE":void 0,"../../../Scritps/Network/ConectManager":void 0,"../../../Scritps/Obs/JackpotItem":void 0,"../../../Scritps/Other/DragMiniGame":void 0,"../../../Scritps/Other/OffMiniGame":void 0,"../../../Scritps/Windown":void 0,"./MiniGameResult":"MiniGameResult","./TrenDuoiReel":"TrenDuoiReel","./TrenDuoiUI":"TrenDuoiUI"}],CardController:[function(t,e){"use strict";cc._RF.push(e,"69c57HUsUVKCbgJO4A2zOZC","CardController"),cc.Class({extends:cc.Component,properties:{darkEffectNode:cc.Node,highLightNode:cc.Node,backgroundNode:cc.Node,foregroundNode:cc.Node,pointLabel:cc.Label,suiltSprite:cc.Sprite,mainPicSprite:cc.Sprite,highLightSprite:cc.Sprite,highLight1SpriteFrame:cc.SpriteFrame,highLight2SpriteFrame:cc.SpriteFrame,highLight3SpriteFrame:cc.SpriteFrame,highLight4SpriteFrame:cc.SpriteFrame,redColor:cc.Color,blackColor:cc.Color,facesBlack:[cc.SpriteFrame],facesRed:[cc.SpriteFrame],suiltsBig:[cc.SpriteFrame],suiltsSmall:[cc.SpriteFrame]},onLoad:function(){},init:function(t){var e=t.point>9,o=t.point>12;e&&!o?t.isBlackSuit?this.mainPicSprite.spriteFrame=this.facesBlack[t.point-10]:this.mainPicSprite.spriteFrame=this.facesRed[t.point-10]:this.mainPicSprite.spriteFrame=this.suiltsBig[t.suit-1],this.trueValue=t.trueValue,this.pointLabel.string=t.pointName,this.pointLabel.node.color=t.isRedSuit?this.redColor:this.blackColor,this.suiltSprite.spriteFrame=this.suiltsSmall[t.suit-1]},reveal:function(t){this.backgroundNode.active=!t,this.foregroundNode.active=t},isReveal:function(){return this.foregroundNode.active},revealWithAnimationFlip:function(t,e,o){void 0===o&&(o=!0);var n=this.node.scaleX,i=this.node.scaleY;this.reveal(!t),o&&this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(e/2,0,i),cc.callFunc(function(){this.reveal(t)},this),cc.scaleTo(e/2,n,i)))},revealWithAnimationFlipMoveScale:function(t,e,o,n,i){this.node.scaleX;var r=this.node.scaleY;this.reveal(!t);var c=cc.spawn(cc.moveTo(e,o,n),cc.sequence(cc.scaleTo(e/4,0,(i+r)/2),cc.callFunc(function(){this.reveal(t)},this),cc.scaleTo(e/4,i,i)));this.node.runAction(c,this)},showForeground:function(){this.foregroundNode.active=!0},hideForeground:function(){this.foregroundNode.active=!1},showBackground:function(){this.backgroundNode.active=!0},hideBackground:function(){this.backgroundNode.active=!1},showHighLightBlue:function(){this.highLightSprite.spriteFrame=this.highLight4SpriteFrame,this.showHighLight()},showHighLight:function(){this.highLightNode.active=!0},hideHighLight:function(){this.highLightNode.active=!1},showDarkEffect:function(){this.darkEffectNode.active=!0,this.hideHighLight()},hideDarkEffect:function(){this.darkEffectNode.active=!1},getTrueValue:function(){return this.trueValue}}),cc._RF.pop()},{}],GuideTrenDuoi:[function(t,e,o){"use strict";cc._RF.push(e,"9d78aBMAUZOUaFInj0bRZzo","GuideTrenDuoi");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),a=cc._decorator,s=a.ccclass,u=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){c.Windown.GuideTrenDuoi=this},e.prototype.start=function(){},e.prototype.onClickClose=function(){var t=this;c.Windown.actionEffectClose(this.node,function(){t.node.active=!1})},e.prototype.show=function(){c.Windown.UIManager.hideLoading(),this.node.active=!0,c.Windown.actionEffectOpen(this.node)},e.prototype.onDestroy=function(){c.Windown.GuideTrenDuoi=null},r([s],e)}(cc.Component));o.default=u,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],JackpotEffect:[function(t,e,o){"use strict";cc._RF.push(e,"cff25Oj+HhPsaOmfkDuv4hF","JackpotEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Obs/LbMoneyChange"),a=cc._decorator,s=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jackpotSkeleton=null,e.balanceLabel=null,e.currentMoney=0,e.balance="",e.increaseValue=0,e}return i(e,t),e.prototype.start=function(){},e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){clearTimeout(this.timeoutHide)},e.prototype.show=function(t){this.clear(),this.node.active=!0,this.node.opacity=255,this.jackpotSkeleton.setAnimation(0,"xu",!0),this.timeoutHide=setTimeout(function(){this.node.runAction(cc.sequence(cc.fadeOut(.25),cc.callFunc(function(){this.node.removeFromParent(!0)},this)))}.bind(this),5e3),this.balanceLabel.setMoney(t)},e.prototype.clear=function(){this.currentMoney=0,this.balance="",this.increaseValue=0,this.balanceLabel.resetLb()},r([u(sp.Skeleton)],e.prototype,"jackpotSkeleton",void 0),r([u(c.default)],e.prototype,"balanceLabel",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../Scritps/Obs/LbMoneyChange":void 0}],LSGGTrenDuoi:[function(t,e,o){"use strict";cc._RF.push(e,"72ef0bV96hIQrTBTR6ipt7Q","LSGGTrenDuoi");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),a=cc._decorator,s=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return i(e,t),e.prototype.onLoad=function(){c.Windown.LSGGTrenDuoi=this},e.prototype.start=function(){},e.prototype.onClickClose=function(){var t=this;c.Windown.actionEffectClose(this.node,function(){t.node.active=!1})},e.prototype.show=function(){c.Windown.UIManager.hideLoading(),this.node.active=!0,c.Windown.actionEffectOpen(this.node)},e.prototype.onDestroy=function(){c.Windown.GuideTrenDuoi=null},r([u(cc.Label)],e.prototype,"label",void 0),r([u],e.prototype,"text",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],MiniGameResult:[function(t,e,o){"use strict";cc._RF.push(e,"3cc11+SHgFDgaHoa40kOqvi","MiniGameResult");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),a=cc._decorator,s=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.addBalanceLabel=null,e.minusBalanceLabel=null,e.messageLabel=null,e.messageNode=null,e.resultAnimation=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.onDestroy=function(){clearTimeout(this.timeoutHide)},e.prototype.show=function(t,e){this.reset(),(t=parseInt(t))>0?(this.node.active=!0,this.addBalanceLabel.node.active=!0,this.addBalanceLabel.string="+"+c.Windown.formatNumber(t),e&&(this.messageNode.active=!0,this.messageLabel.string=e),this.node.active&&this.resultAnimation.play(),this.initTimeout()):0!==t&&(this.node.active=!0,this.minusBalanceLabel.node.active=!0,this.minusBalanceLabel.string=c.Windown.formatNumber(t),e&&(this.messageNode.active=!0,this.messageLabel.string=e),this.node.active&&this.resultAnimation.play(),this.initTimeout())},e.prototype.initTimeout=function(){clearTimeout(this.timeoutHide),this.timeoutHide=setTimeout(function(){this.node.active=!1}.bind(this),1e3*this.resultAnimation.defaultClip.duration)},e.prototype.reset=function(){clearTimeout(this.timeoutHide),this.node.active=!1,this.addBalanceLabel.node.active=!1,this.minusBalanceLabel.node.active=!1,this.messageNode.active=!1},r([u(cc.Label)],e.prototype,"addBalanceLabel",void 0),r([u(cc.Label)],e.prototype,"minusBalanceLabel",void 0),r([u(cc.Label)],e.prototype,"messageLabel",void 0),r([u(cc.Node)],e.prototype,"messageNode",void 0),r([u(cc.Animation)],e.prototype,"resultAnimation",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],RankViewTrenDuoi:[function(t,e,o){"use strict";cc._RF.push(e,"8c9afRndF1N3a5rvGq6pPGV","RankViewTrenDuoi");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),a=cc._decorator,s=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return i(e,t),e.prototype.onLoad=function(){c.Windown.RankViewTrenDuoi=this},e.prototype.start=function(){},e.prototype.onClickClose=function(){var t=this;c.Windown.actionEffectClose(this.node,function(){t.node.active=!1})},e.prototype.show=function(){c.Windown.UIManager.hideLoading(),this.node.active=!0,c.Windown.actionEffectOpen(this.node)},e.prototype.onDestroy=function(){c.Windown.GuideTrenDuoi=null},r([u(cc.Label)],e.prototype,"label",void 0),r([u],e.prototype,"text",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../Scritps/Windown":void 0}],Toast:[function(t,e){"use strict";cc._RF.push(e,"15a80ZyApxFVqRdvZVla5Nn","Toast"),cc.Class({extends:cc.Component,properties:{toastLabel:cc.Label},onLoad:function(){this.timeOutHideToast=null,this.timeOutActiveToast=null},onDestroy:function(){this.clearTimeOut()},showToast:function(t){this.clearTimeOut(),this.setMessage(t),this.node.active=!0,this.node.getComponent(cc.Animation).play("ShowToastAnimation"),this.timeOutHideToast=setTimeout(function(){this.hideToast()}.bind(this),2e3)},hideToast:function(){this.node.active&&this.node.getComponent(cc.Animation).play("HideToastAnimation"),this.timeOutActiveToast=setTimeout(function(){this.node.active=!1,this.setMessage("")}.bind(this),100)},setMessage:function(t){this.toastLabel.string=t},clearTimeOut:function(){clearTimeout(this.timeOutHideToast),clearTimeout(this.timeOutActiveToast)}}),cc._RF.pop()},{}],TrenDuoiCard:[function(t,e,o){"use strict";cc._RF.push(e,"cb2e9bKFR9OI42cfAkbrGET","TrenDuoiCard"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=(n.ccclass,n.property,cc.Enum({Spade:1,Club:2,Diamon:3,Heart:4})),r="NAN,2,3,4,5,6,7,8,9,10,J,Q,K,A".split(",");o.default=function(t){var e=Math.floor((t-1)/13)+1,o=Math.floor((t-1)%13)+1,n=e;Object.defineProperties(this,{point:{value:o,writable:!1},suit:{value:n,writable:!1},id:{value:13*(n-1)+(o-1),writable:!1},pointName:{get:function(){return r[this.point]}},suitName:{get:function(){return i[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})},cc._RF.pop()},{}],TrenDuoiHistoryCardItem:[function(t,e){"use strict";cc._RF.push(e,"9c8b1+2usJO2p68FYtOFtP4","TrenDuoiHistoryCardItem"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(t){this.card=t,this.node.getComponent(cc.Label).string=this.getResultByTrueValue(t)},getResultByTrueValue:function(t){var e="",o="",n=Math.floor((t-1)/13)+1,i=Math.floor((t-1)%13)+1;switch(i){case 10:o="J";break;case 11:o="Q";break;case 12:o="K";break;case 13:o="A";break;default:o=(i+1).toString()}switch(n){case 1:e+="\u2660";break;case 2:e+="\u2663";break;case 3:e+="\u2666";break;case 4:e+="\u2665"}return o+e+" "}}),cc._RF.pop()},{}],TrenDuoiReel:[function(t,e,o){"use strict";cc._RF.push(e,"67ce1l7Ce5EQ7SQrqpXxuNd","TrenDuoiReel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../Scritps/Windown"),a=t("./TrenDuoiCard"),s=cc._decorator,u=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardPrefab=null,e}return i(e,t),e.prototype.onLoad=function(){this.trueValue=null,this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.cardPrefab);this.pool.put(e)}this.randomCard()},e.prototype.init=function(t){this.TrenDuoi=t,this.TrenDuoiUI=t.TrenDuoiUI,this.MiniGameResult=t.MiniGameResult},e.prototype.start=function(){},e.prototype.spin=function(t,e,o,n){this.reset(),this.TrenDuoi.setSpining(!0),this.setCard(this.trueValue),this.trueValue=t,n||this.TrenDuoi.setPlaying(o.status);for(var i=1;i<e;i++){var r=t;i!=e-1&&(r=this.getRandomTrueValue());var c=this.instanceCard(r);c.setPosition(0,300*i),c.parent=this.node}var a=300*(e-1)*this.node.scaleY,s=a/1e3,u=cc.moveTo(s,this.node.x,-a).easing(cc.easeInOut(3)),l=cc.callFunc(function(){this.setCard(t),this.TrenDuoi.setSpining(!1),o&&this.TrenDuoi.node.active&&(n?this.TrenDuoi.addHistoryCardNode(o.card):(this.TrenDuoi.setPlaying(o.status),o.status?(this.TrenDuoi.checkAt(o.card)&&this.TrenDuoi.numberAt++,this.TrenDuoi.initBalance(o),this.TrenDuoi.initTime(o),this.TrenDuoi.addHistoryCardNode(o.card)):this.TrenDuoi.showMessage("B\u1ea1n \u0111\xe3 thua. Ch\xfac b\u1ea1n may m\u1eafn l\u1ea7n sau")),this.TrenDuoiUI.initCardAce(o.numberAce,o.card))},this),p=cc.delayTime(1),h=cc.callFunc(function(){this.setCard(t),this.TrenDuoi.setSpining(!1),this.TrenDuoi.setSendSpin(!1),n?(this.TrenDuoi.setPlaying(!1),this.TrenDuoiUI.showJackPot(o.JackPot),this.TrenDuoi.reset()):o.status||this.TrenDuoi.reset()},this);this.node.runAction(cc.sequence(u,l,p,h))},e.prototype.getRandomTrueValue=function(){return c.Windown.RandomNumber(2,14),c.Windown.RandomNumber(0,3),c.Windown.RandomNumber(1,52)},e.prototype.randomCard=function(){var t=this.getRandomTrueValue();this.reset(),this.setCard(t)},e.prototype.setCard=function(t){this.trueValue=t;var e=this.instanceCard(t);e.setPosition(0,0),e.parent=this.node},e.prototype.instanceCard=function(t){var e;this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.cardPrefab));var o=e.getComponent("CardController"),n=new a.default(t);return o.init(n),o.reveal(!0),e.scale=1.5,e.cardController=o,e},e.prototype.putAllChipToPool=function(){if(this.pool){var t=this.node.children,e=[];for(var o in t)e.push(t[o]);for(var o in e)this.pool.put(e[o])}},e.prototype.reset=function(){this.node.stopAllActions(),this.node.setPosition(this.node.x,0),this.putAllChipToPool()},r([l(cc.Prefab)],e.prototype,"cardPrefab",void 0),r([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Scritps/Windown":void 0,"./TrenDuoiCard":"TrenDuoiCard"}],TrenDuoiUI:[function(t,e,o){"use strict";cc._RF.push(e,"24d6bU4WwVC/pEjSOjiprVE","TrenDuoiUI");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./TrenDuoiReel"),a=cc._decorator,s=a.ccclass,u=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.highButtonNode=null,e.lowButtonNode=null,e.atsNode=[],e.playNode=null,e.cardNode=null,e.TrenDuoiReel=null,e.jackpotPrefab=null,e.jackpotNode=null,e.nodeAce=null,e}return i(e,t),e.prototype.start=function(){},e.prototype.removeAce=function(){this.nodeAce.destroyAllChildren()},e.prototype.initCardAce=function(t,e){if(this.nodeAce.children.length<t){var o=this.TrenDuoiReel.instanceCard(e);o.parent=this.nodeAce,o.scale=1}},e.prototype.spinCard=function(t,e,o){void 0===o&&(o=!1),this.TrenDuoiReel.spin(t,15,e,o)},e.prototype.showPlayNode=function(){this.cardNode.stopAllActions()},e.prototype.showHighButton=function(){this.highButtonNode.active=!0},e.prototype.showLowButton=function(){this.lowButtonNode.active=!0},e.prototype.showHighDisable=function(){this.highButtonNode.active=!1},e.prototype.showLowDisable=function(){this.lowButtonNode.active=!1},e.prototype.showJackPot=function(t){this.jackpotNode.removeAllChildren(!0);var e=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(e),e.getComponent("JackpotEffect").show(t),e.position=new cc.Vec3(0,0,0)},e.prototype.reset=function(){this.removeAce(),this.showPlayNode(),this.showHighButton(),this.showLowButton()},r([u(cc.Node)],e.prototype,"highButtonNode",void 0),r([u(cc.Node)],e.prototype,"lowButtonNode",void 0),r([u([cc.Node])],e.prototype,"atsNode",void 0),r([u(cc.Node)],e.prototype,"playNode",void 0),r([u(cc.Node)],e.prototype,"cardNode",void 0),r([u(c.default)],e.prototype,"TrenDuoiReel",void 0),r([u(cc.Prefab)],e.prototype,"jackpotPrefab",void 0),r([u(cc.Node)],e.prototype,"jackpotNode",void 0),r([u(cc.Node)],e.prototype,"nodeAce",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./TrenDuoiReel":"TrenDuoiReel"}]},{},["CaoThapView","CardController","GuideTrenDuoi","JackpotEffect","LSGGTrenDuoi","MiniGameResult","RankViewTrenDuoi","Toast","TrenDuoiCard","TrenDuoiHistoryCardItem","TrenDuoiReel","TrenDuoiUI"]);